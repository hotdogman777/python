import folium
import numpy as np

# 각 도시 데이터 리스트로 구성

# 도시 데이터 (도시명, 위도, 경도)
cities = [
    ["울릉도", 37.4840, 130.9050, 1541],
    ["울진", 36.9930, 129.4000, 1198.3],
    ["안동", 36.5680, 128.7290, 1002.4],
    ["상주", 36.4100, 128.1600, 1157.6],
    ["포항", 36.0190, 129.3430, 1172.5],
    ["창원", 35.2280, 128.6810, 1436.2],
    ["통영", 34.8540, 128.4340, 1664.5],
    ["진주", 35.1800, 128.1080, 1537.1],
    ["김해시", 35.2280, 128.8890, 1375.2],
    ["양산시", 35.3350, 129.0370, 1504],
    ["의령군", 35.3190, 128.2610, 1355],
    ["함양군", 35.5200, 127.7250, 1325.1],
    ["봉화", 36.9430, 128.7340, 1089.2],
    ["영주", 36.8050, 128.6240, 1267.5],
    ["문경", 36.5860, 128.1850, 1273],
    ["청송군", 36.4350, 129.0570, 967.2],
    ["영덕", 36.4150, 129.3650, 1113.4],
    ["의성", 36.3520, 128.6970, 920.5],
    ["구미", 36.1190, 128.3440, 1132],
    ["영천", 35.9740, 128.9380, 1076.1],
    ["경주시", 35.8560, 129.2240, 1121.2],
    ["거창", 35.6860, 127.9090, 1240.7],
    ["합천", 35.5660, 128.1650, 1394.9],
    ["밀양", 35.5030, 128.7460, 1214.5],
    ["산청", 35.4150, 127.8750, 1592.8],
    ["거제", 34.8800, 128.6210, 1999.7],
    ["남해", 34.8370, 127.8920, 2002.3],
    ["영양", 36.6640, 129.1140, 1009.1],
    ["성주", 35.9190, 128.2860, 1145.8],
    ["고령", 35.7260, 128.2660, 1266.7],
    ["청도", 35.6470, 128.7360, 1229],
    ["예천", 36.6540, 128.4520, 978.2],
    ["김천", 36.1370, 128.1130, 1084.2],
    ["칠곡", 35.9920, 128.4010, 1089],
    ["경산", 35.8250, 128.7410, 1114.1],
    ["삼천포", 34.9290, 128.0850, 1462.6],
    ["고성", 34.9730, 128.3220, 1560.7],
    ["창녕", 35.5410, 128.4990, 1187],
    ["함안", 35.2720, 128.4060, 1322.3],
    ["하동", 35.0670, 127.7500, 1770.8],
]
# 강우량 값만 추출
rain_values = [city[3] for city in cities]

# 하위 5% 기준값 계산
cutoff = np.percentile(rain_values, 5)
print(f"하위 5% 기준 강우량: {cutoff:.1f}mm")

low_rain_cities = [city for city in cities if city[3] <= cutoff]

print("하위 5% 지역 목록:")
for city in low_rain_cities:
    print(f"{city[0]} ({city[3]}mm)")


# folium 지도 생성
m = folium.Map(location=[35.5, 128.7], zoom_start=8, tiles='cartodbpositron')

# 도시별 마커 추가
for name, lat, lon, avg in cities:
    folium.Marker(
        location=[lat, lon],
        popup=f"<div style='font-size:16px; line-height:1.4;'><b>{name}</b><br>강우량 값: {avg}mm</div>",
        tooltip=f"{name} ({avg}mm)",
        icon=folium.Icon(color='red', icon='cloud')
    ).add_to(m)

# HTML 저장
m.save("rain_input_map02.html")
print("✅ 지도 생성 완료! 파일 열어서 도시별 강우량을 입력해보세요.")
